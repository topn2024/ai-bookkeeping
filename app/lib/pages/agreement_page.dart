import 'package:flutter/material.dart';

/// 协议类型枚举
enum AgreementType {
  userAgreement,
  privacyPolicy,
}

/// 协议内容页面
class AgreementPage extends StatelessWidget {
  final AgreementType type;

  const AgreementPage({super.key, required this.type});

  String get _title => type == AgreementType.userAgreement ? '用户协议' : '隐私政策';

  String get _content =>
      type == AgreementType.userAgreement ? _userAgreementContent : _privacyPolicyContent;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(_title),
      ),
      body: SingleChildScrollView(
        padding: const EdgeInsets.all(16),
        child: SelectableText(
          _content,
          style: Theme.of(context).textTheme.bodyMedium?.copyWith(
                height: 1.8,
              ),
        ),
      ),
    );
  }
}

/// 用户服务协议内容
const String _userAgreementContent = '''
白记用户服务协议

更新日期：2026年1月1日
生效日期：2026年1月1日

一、协议的接受与修改

1.1 欢迎使用白记（以下简称"本应用"）。本协议是您与白记团队之间关于使用本应用服务的法律协议。

1.2 您在注册、登录或使用本应用时，即表示您已阅读、理解并同意接受本协议的全部条款。

1.3 我们保留随时修改本协议的权利，修改后的协议将通过应用内通知或其他方式告知您。

二、服务内容

2.1 本应用提供以下服务：
• 手动记账功能
• 图片识别记账
• 语音记账
• 邮箱账单解析
• 统计报表分析
• 预算管理
• 多账本管理
• 数据同步与备份

2.2 部分功能需要付费会员才能使用，具体以应用内标识为准。

三、用户账户

3.1 您需要注册账户才能使用完整功能。注册时需提供真实、准确的信息。

3.2 您有责任妥善保管账户信息，因账户泄露导致的损失由您自行承担。

3.3 每位用户只能注册一个账户，禁止转让、出借账户。

四、用户行为规范

4.1 您同意不会利用本应用：
• 从事任何违法活动
• 上传虚假、欺诈性内容
• 侵犯他人知识产权
• 传播恶意软件或病毒
• 干扰或破坏应用正常运行
• 未经授权访问他人账户

4.2 违反上述规范，我们有权暂停或终止您的账户。

五、知识产权

5.1 本应用的所有内容（包括但不限于文字、图片、代码、商标）均受知识产权法保护。

5.2 您在使用本应用过程中产生的数据，其所有权归您所有，但您授权我们为提供服务而必要的使用权。

六、隐私保护

6.1 我们重视您的隐私保护，详细信息请参阅《隐私政策》。

6.2 未经您同意，我们不会向第三方披露您的个人信息，法律要求除外。

七、服务的中断与终止

7.1 我们可能因维护、升级或不可抗力暂停服务，将尽量提前通知。

7.2 您可随时注销账户，注销后数据将按隐私政策处理。

7.3 如您严重违反本协议，我们有权终止服务并不予退款。

八、免责声明

8.1 本应用提供的AI识别功能可能存在误差，请您核实后确认。

8.2 我们不对因网络中断、系统故障等导致的服务中断承担责任。

8.3 本应用仅为记账工具，不提供投资建议，您的财务决策由您自行负责。

九、付费服务

9.1 会员服务采用订阅制，具体价格以应用内展示为准。

9.2 订阅自动续费，您可随时在账户设置中取消。

9.3 已购买的服务，除法律规定外，一般不予退款。

十、争议解决

10.1 本协议适用中华人民共和国法律。

10.2 因本协议产生的争议，双方应协商解决；协商不成，可向有管辖权的人民法院提起诉讼。

十一、联系我们

如有疑问，请通过以下方式联系：
• 邮箱：support@aibook.app
• 应用内反馈功能

---
白记团队 保留本协议的最终解释权。
''';

/// 隐私政策内容
const String _privacyPolicyContent = '''
白记隐私政策

更新日期：2026年1月1日
生效日期：2026年1月1日

引言

白记团队（以下简称"我们"）深知个人信息对您的重要性，我们将按照法律法规要求，采取相应安全保护措施，保护您的个人信息安全可控。

一、我们收集的信息

1.1 您主动提供的信息

信息类型          收集目的              是否必须
手机号码          账户注册与登录         是
邮箱地址          账单解析、通知         否
头像、昵称        个人资料展示           否
交易记录          核心记账功能           是

1.2 自动收集的信息

信息类型          收集目的              是否必须
设备标识符        安全防护、账户保护     是
操作系统版本      兼容性适配             是
应用使用数据      产品优化改进           否（可关闭）
崩溃日志          问题排查修复           是

1.3 敏感信息说明
• 相机权限：用于拍照记账，仅在您主动使用时调用
• 麦克风权限：用于语音记账，仅在您主动使用时调用
• 相册权限：用于选择图片识别，仅读取您选择的图片

二、信息的使用

我们收集的信息将用于：
1. 提供、维护和改进我们的服务
2. 处理您的请求和交易
3. 发送服务相关通知
4. 安全防护和欺诈检测
5. 遵守法律义务

我们承诺不会：
• 出售您的个人信息
• 将您的信息用于未经同意的营销
• 与无关第三方分享您的数据

三、信息的存储

3.1 存储地点：您的数据存储在位于中国境内的服务器。

3.2 存储期限：
• 账户信息：账户存续期间及注销后30天
• 交易记录：按照财务凭证保管要求保存
• 日志数据：最长保存90天

3.3 数据加密：敏感信息采用AES-256加密存储。

四、信息的共享

我们仅在以下情况共享您的信息：

4.1 经您同意：获得您明确同意后的共享

4.2 服务提供商：

合作方            共享内容              用途
阿里云            加密存储数据          云服务托管
微信/支付宝       订单信息              支付处理
短信服务商        手机号                验证码发送

4.3 法律要求：根据法律法规或政府要求

五、您的权利

您对个人信息享有以下权利：

5.1 查阅权：查看您的个人信息
    路径：设置 → 隐私 → 个人信息

5.2 更正权：更正不准确的信息
    路径：设置 → 账户 → 编辑资料

5.3 删除权：删除您的信息
    路径：设置 → 账户 → 注销账户

5.4 导出权：导出您的数据
    路径：设置 → 数据 → 导出我的数据

5.5 撤回同意：撤回授权同意
    路径：设置 → 隐私 → 权限管理

六、未成年人保护

6.1 本应用不面向14周岁以下儿童。

6.2 如果我们发现在未经监护人同意的情况下收集了儿童信息，将尽快删除。

6.3 监护人如有疑问，请通过文末方式联系我们。

七、Cookie和类似技术

7.1 我们使用Cookie和类似技术来：
• 记住您的登录状态
• 分析应用使用情况
• 提供个性化体验

7.2 您可以在设备设置中管理Cookie偏好。

八、信息安全

我们采取以下措施保护您的信息：
• 数据传输全程HTTPS加密
• 敏感数据加密存储
• 严格的访问权限控制
• 定期安全审计
• 员工安全培训

九、隐私政策的更新

9.1 我们可能适时修订本政策，重大变更将通过应用内通知告知。

9.2 继续使用服务即表示同意更新后的政策。

十、联系我们

如有隐私相关问题：
• 隐私专员邮箱：privacy@aibook.app
• 应用内反馈功能

我们将在15个工作日内回复您的请求。

---
© 2026 白记团队 版权所有
''';
