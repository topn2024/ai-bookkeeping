# 权利要求书

## 多因子交易去重方法及系统

### 独立权利要求

**权利要求1**：一种多因子交易去重方法,其特征在于,包括以下步骤:

S1. 六因子特征提取步骤:
- 提取交易的六维特征向量{金额:Decimal(18,2),时间:Timestamp,商户:String,类别:Enum,描述:String,来源:Enum};
- 每个因子独立计算相似度得分,特征提取时间<10ms;

S2. 时空索引加速步骤:
- 采用时间窗口±24小时和金额范围±5%建立二维B-Tree索引;
- 快速筛选候选匹配交易,索引查询时间<50ms,候选集大小<100条;
- 计算复杂度从O(n²)降低到O(log n);

S3. 多因子加权评分步骤:
- 采用六因子加权评分模型,计算综合相似度S=Σ(Wi×Si);
- 金额因子S_amount=1-|A.amount-B.amount|/max(A.amount,B.amount),权重W_amount=0.30(高价值)或0.20(低价值);
- 时间因子S_time=1-min(time_diff/86400,1),权重W_time=0.25;
- 商户因子采用Levenshtein相似度算法,权重W_merchant=0.20;
- 类别因子S_category=1(相同)或0(不同),权重W_category=0.15;
- 描述因子采用余弦相似度算法,权重W_description=0.10;
- 来源因子S_source=0.5(不同来源)或0(相同来源),权重W_source=0.10;
- 评分准确率>92%,计算时间<20ms;

S4. 自适应阈值判断步骤:
- 根据交易金额A和历史误判率E动态调整相似度阈值T∈[0.7,0.95];
- 高价值交易(A≥1000元)阈值T=0.90+0.05×(1-E);
- 中价值交易(100≤A<1000元)阈值T=0.80+0.05×(1-E);
- 低价值交易(A<100元)阈值T=0.70+0.05×(1-E);
- 阈值准确率>95%;

S5. 智能合并策略步骤:
- 对相似度>阈值的交易,采用字段优先级合并策略;
- 金额优先保留置信度高的,时间优先保留最早时间,商户优先保留中文名称;
- 描述合并两个描述,来源标记为"多源";
- 合并准确率>90%。

**权利要求2**：一种多因子交易去重系统,其特征在于,包括:

特征提取模块:提取六维特征向量,特征提取时间<10ms;

时空索引模块:采用时间窗口±24小时和金额范围±5%建立二维B-Tree索引,索引查询时间<50ms,候选集大小<100条;

多因子评分模块:采用六因子加权评分模型,评分准确率>92%,计算时间<20ms;

自适应阈值模块:根据交易金额和历史误判率动态调整阈值T∈[0.7,0.95],阈值准确率>95%;

智能合并模块:采用字段优先级合并策略,合并准确率>90%。

### 从属权利要求

**权利要求3**：根据权利要求1所述的方法,其特征在于,所述时空索引加速步骤中:
- 时间窗口范围为中心时间±24小时;
- 金额范围为中心金额×(1±5%);
- 采用B-Tree二维索引结构;
- 当历史交易>10000条时,索引查询时间<50ms,候选集从10000条筛选到<100条,筛选效率>99%;
- 计算复杂度从O(n²)降低到O(log n),去重响应时间从>3秒缩短到<100ms,缩短96.7%以上。

**权利要求4**：根据权利要求1所述的方法,其特征在于,所述多因子加权评分步骤中:
- 金额因子计算公式S_amount=1-|A.amount-B.amount|/max(A.amount,B.amount);
- 时间因子计算公式S_time=1-min(|A.time-B.time|/86400,1);
- 商户因子采用Levenshtein距离算法,相似度=1-距离/max(len(A),len(B));
- 描述因子采用余弦相似度算法;
- 综合相似度S=Σ(Wi×Si),评分准确率>92%。

**权利要求5**：根据权利要求1所述的方法,其特征在于,所述自适应阈值判断步骤中:
- 高价值交易(≥1000元)采用高阈值0.90+0.05×(1-E),误判率<5%;
- 中价值交易(100-1000元)采用中阈值0.80+0.05×(1-E);
- 低价值交易(<100元)采用低阈值0.70+0.05×(1-E),漏检率<15%;
- 阈值准确率>95%,相比固定阈值(准确率<60%)提升35个百分点以上。

**权利要求6**：根据权利要求1所述的方法,其特征在于,所述智能合并策略步骤中:
- 金额字段优先保留置信度高的交易;
- 时间字段优先保留最早时间;
- 商户字段优先保留中文名称;
- 描述字段合并为"描述A | 描述B";
- 来源字段标记为"多源(来源A+来源B)";
- 合并准确率>90%,相比简单覆盖(准确率<75%)提升15个百分点以上。

**权利要求7**：根据权利要求1所述的方法,其特征在于,还包括跨平台商户识别步骤:
- 采用Levenshtein距离算法识别不同平台对同一商户的不同描述;
- 内置商户同义词库,如"麦当劳"、"McDonald's"、"金拱门";
- 跨平台商户识别准确率>85%,相比现有技术(<60%)提升25个百分点以上。

**权利要求8**：根据权利要求1所述的方法,其特征在于,还包括批量去重步骤:
- 支持批量导入多源交易数据(支付宝、微信、银行、信用卡);
- 批量特征提取时间=交易数×10ms;
- 批量去重检测时间=交易数×75ms;
- 当导入230笔交易时,总处理时间<20秒,去重准确率>92%。

**权利要求9**：根据权利要求1所述的方法,其特征在于,还包括误判率统计步骤:
- 统计历史去重的误判次数和总次数;
- 计算历史误判率E=误判次数/总次数;
- 将误判率E反馈到自适应阈值计算中;
- 实现阈值的自我优化,阈值准确率>95%。

**权利要求10**：根据权利要求2所述的系统,其特征在于,还包括:
- 商户同义词库模块:存储跨平台商户名称映射关系;
- 误判率统计模块:统计历史误判率并反馈到阈值计算;
- 批量处理模块:支持批量导入和批量去重,处理时间<100ms/笔。

### 产品权利要求

**权利要求11**：一种计算机可读存储介质,其上存储有计算机程序,其特征在于,该程序被处理器执行时实现如权利要求1至9中任一项所述的多因子交易去重方法。

**权利要求12**：一种电子设备,包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序,其特征在于,所述处理器执行所述程序时实现如权利要求1至9中任一项所述的多因子交易去重方法,其中:
- 特征提取时间<10ms;
- 索引查询时间<50ms;
- 评分准确率>92%;
- 阈值准确率>95%;
- 合并准确率>90%;
- 去重响应时间<100ms。
