# 权利要求书

## 基于地理围栏的个人预算预警方法及系统

### 独立权利要求

**权利要求1**：一种基于地理围栏的个人预算预警方法，其特征在于，包括以下步骤：

S1. 本地化位置处理步骤：
- 在用户设备本地存储地理围栏定义；
- 在本地进行位置与围栏的匹配计算；
- 匹配结果仅包含围栏标识，不包含精确坐标；

S2. 围栏-预算关联步骤：
- 将地理围栏与个人预算分类进行关联，所述预算分类包括购物、餐饮、娱乐；
- 检测用户进入或离开围栏事件；

S3. 预算预警步骤：
- 当用户进入围栏时，查询关联预算的使用情况；
- 根据预算使用率生成预警消息，所述预警消息包括预算剩余额度；
- 通过本地通知向用户发送预警。

**权利要求2**：一种基于地理围栏的个人预算预警系统，其特征在于，包括：

本地化位置处理模块：用于在设备本地存储围栏定义、进行位置匹配计算，所有位置数据不上传服务器；

围栏-预算关联模块：用于建立地理围栏与个人预算分类的关联关系，并检测围栏事件；

预算预警模块：用于在围栏事件触发时查询预算状态并生成预警通知。

### 从属权利要求

**权利要求3**：根据权利要求1所述的方法，其特征在于，所述本地化位置处理步骤还包括隐私保护措施：

- 位置数据脱敏：存储时使用区域ID替代精确坐标；
- 历史位置自动清理：位置数据定期过期删除；
- 可选云同步：仅同步围栏配置，不同步位置历史。

**权利要求4**：根据权利要求1所述的方法，其特征在于，还包括后台位置监听优化步骤：

- 自适应监听频率：根据用户移动状态调整监听频率，静止状态每5分钟检测一次，移动状态每1分钟检测一次；
- 系统级围栏触发：使用操作系统地理围栏API，仅在进入/离开围栏时唤醒应用；
- 智能休眠：夜间自动降低监听频率。

**权利要求5**：根据权利要求1所述的方法，其特征在于，所述预警消息根据预算使用率分级：

- 使用率超过90%：发送"预算即将用完"警告；
- 使用率超过80%：发送"预算使用率较高"提醒；
- 使用率低于80%：发送"进入区域，预算剩余"信息。

**权利要求6**：根据权利要求1所述的方法，其特征在于，还包括消费场景识别步骤：

- 基于时间和位置识别消费场景，所述场景包括午餐、购物、娱乐、旅游；
- 识别到场景后自动激活对应预算分类；
- 消费记录自动预填场景分类。

**权利要求7**：根据权利要求1所述的方法，其特征在于，还包括停留时间分析步骤：

- 记录用户在围栏内的停留时长；
- 基于历史数据预测本次消费金额；
- 当预测消费超过剩余预算时发送额外预警。

**权利要求8**：根据权利要求1所述的方法，其特征在于，还包括异常消费检测步骤：

- 检测地理异常：消费位置距离常规活动区域过远；
- 检测时间异常：非常规消费时段；
- 检测金额异常：超过该位置历史平均消费；
- 综合评分超过阈值时发送异常预警。

**权利要求9**：根据权利要求1所述的方法，其特征在于，所述围栏类型包括：

- 商业区围栏：关联购物预算；
- 餐饮街围栏：关联餐饮预算；
- 娱乐区围栏：关联娱乐预算；
- 自定义围栏：用户自行定义围栏和关联预算。

**权利要求10**：根据权利要求2所述的系统，其特征在于，还包括：

商户识别模块：用于在设备本地维护商户信息库，基于用户位置匹配附近商户，并记录用户对商户的分类偏好；

位置预算看板模块：用于显示各区域的预算使用情况，并提供地图可视化展示消费热点。

**权利要求11**：根据权利要求1所述的方法，其特征在于，本发明聚焦于个人消费预算管理场景，具有以下与费用报销系统的本质区别：

- 触发时机：在用户进入消费区域时实时触发预警，而非行程结束后计算报销；
- 数据流向：位置数据在本地处理后即丢弃，不同步到云端，而非上传服务器生成报销凭证；
- 输出目的：输出预算剩余额度和消费建议以指导用户行为，而非输出里程数和报销金额用于财务合规；
- 围栏定义：围栏为消费场景类型（购物、餐饮、娱乐），而非办公场所或客户地址。
