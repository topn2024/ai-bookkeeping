# 权利要求书

## LLM增强的四维语音交互方法及系统

### 独立权利要求

**权利要求1**：一种LLM增强的四维语音交互方法，其特征在于，包括以下步骤：

S1. 四维交互框架构建步骤：定义记账、查询、配置、导航四个交互维度，采用关键词检测算法识别用户语音文本所属维度，其中记账维度关键词包括"花了、买了、收入、支出"，查询维度关键词包括"多少、统计、占比、排行"，配置维度关键词包括"设置、修改、调整、删除"，导航维度关键词包括"打开、查看、进入、返回"，当匹配多个维度时按优先级排序为记账>查询>配置>导航，维度识别准确率>95%，识别时间<10ms；

S2. LLM优先混合识别步骤：采用四层识别架构进行意图识别和实体提取，所述四层识别架构包括：
- 第一层LLM优先识别：调用大语言模型识别用户语音文本的意图和实体，输出置信度，当置信度>0.7时使用LLM识别结果，复杂语句识别准确率>92%，响应时间<800ms；
- 第二层精确规则匹配：采用正则表达式匹配用户语音文本，当置信度>0.9时使用规则匹配结果，简单语句识别准确率>95%，响应时间<50ms；
- 第三层同义词扩展匹配：对用户语音文本进行同义词替换后匹配，识别准确率>85%，响应时间<80ms；
- 第四层学习缓存匹配：查询个性化缓存，缓存命中率>60%，缓存命中时响应时间<30ms；

S3. 并行调用优化步骤：同时启动LLM识别线程和规则匹配线程，当规则匹配先返回且置信度>0.9时使用规则结果并取消LLM调用，否则等待LLM结果，平均响应时间<200ms；

S4. 自学习缓存步骤：从LLM高置信度识别结果中学习，当LLM识别置信度>0.85时将用户语音文本与识别结果存入缓存并设置使用次数为1，当用户纠正识别结果时将纠正后的结果存入缓存并设置使用次数为10，当缓存大小>1000时淘汰使用次数最少的10%；

S5. 多操作并发识别步骤：采用分隔符检测算法识别用户语音文本中的逗号、连词、顿号，将语音文本分割为多个操作段，对每个操作段提取动作、金额、分类，采用上下文补全算法补全缺失的分类信息，多操作识别成功率>90%。

**权利要求2**：一种LLM增强的四维语音交互系统，其特征在于，包括：

四维交互框架模块，配置为定义记账、查询、配置、导航四个交互维度，采用关键词检测算法识别用户语音文本所属维度，维度识别准确率>95%；

LLM优先混合识别模块，配置为采用四层识别架构进行意图识别和实体提取，所述四层识别架构包括LLM优先识别层、精确规则匹配层、同义词扩展匹配层、学习缓存匹配层；

并行调用优化模块，配置为同时启动LLM识别线程和规则匹配线程，根据返回顺序和置信度选择识别结果；

自学习缓存模块，配置为从LLM高置信度识别结果和用户纠正中学习，建立个性化缓存；

多操作并发识别模块，配置为采用分隔符检测算法和上下文补全算法识别和处理多操作指令。

### 从属权利要求

**权利要求3**：根据权利要求1所述的方法，其特征在于，所述四维交互框架构建步骤中，当关键词检测无法识别维度时，调用大语言模型进行维度识别兜底。

**权利要求4**：根据权利要求1所述的方法，其特征在于，所述LLM优先混合识别步骤中，第一层LLM优先识别的置信度阈值为0.7，第二层精确规则匹配的置信度阈值为0.9，第四层学习缓存匹配的置信度阈值为0.85。

**权利要求5**：根据权利要求1所述的方法，其特征在于，所述并行调用优化步骤中，规则匹配线程和LLM识别线程同时启动，规则匹配线程先返回时判断置信度是否>0.9，若是则使用规则结果并取消LLM调用，若否则等待LLM结果。

**权利要求6**：根据权利要求1所述的方法，其特征在于，所述自学习缓存步骤中，用户纠正的识别结果的使用次数权重为10，高于LLM高置信度识别结果的使用次数权重1。

**权利要求7**：根据权利要求1所述的方法，其特征在于，所述多操作并发识别步骤中，分隔符包括逗号"，"、","、连词"和、还有、以及"、顿号"、"。

**权利要求8**：根据权利要求1所述的方法，其特征在于，所述多操作并发识别步骤中，上下文补全算法从前一个操作的分类信息推断当前操作的分类信息。

**权利要求9**：根据权利要求2所述的系统，其特征在于，所述LLM优先混合识别模块中，LLM优先识别层的置信度阈值为0.7，精确规则匹配层的置信度阈值为0.9，自学习缓存模块的置信度阈值为0.85。

**权利要求10**：根据权利要求2所述的系统，其特征在于，还包括操作执行模块，配置为根据识别的维度和意图执行相应操作，所述操作包括创建交易记录、查询数据、配置设置、页面导航。

**权利要求11**：一种计算机可读存储介质，其上存储有计算机程序，其特征在于，所述计算机程序被处理器执行时实现如权利要求1至8中任一项所述的方法。

**权利要求12**：一种电子设备，包括存储器、处理器及存储在存储器上并可在处理器上运行的计算机程序，其特征在于，所述处理器执行所述计算机程序时实现如权利要求1至8中任一项所述的方法。
