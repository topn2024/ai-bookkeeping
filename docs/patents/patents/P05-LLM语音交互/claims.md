# 权利要求书

## LLM增强的四维语音交互方法及系统

### 独立权利要求

**权利要求1**：一种LLM增强的四维语音交互方法，其特征在于，包括以下步骤：

S1. 四维意图识别步骤：
- 定义四个交互维度：记账（Bookkeeping）、查询（Query）、配置（Configuration）、导航（Navigation）；
- 通过关键词检测优先识别维度，记账>查询>配置>导航；
- 无法匹配时调用LLM进行意图识别；

S2. LLM优先混合识别步骤：
- 第一层：LLM优先识别，处理复杂语句；
- 第二层：规则引擎兜底，处理简单明确指令；
- 第三层：模糊匹配补充，处理常见变体；
- 第四层：用户确认兜底，无法确定时询问用户；

S3. 多操作识别步骤：
- 识别包含多个操作的语句，如"打车35，吃饭50"；
- 拆分为独立操作序列；
- 批量执行并返回汇总结果；

S4. 上下文管理步骤：
- 维护维度上下文：记录当前所在维度；
- 维护对话上下文：记录最近3轮对话；
- 维护实体上下文：记录提到的金额、分类、时间等实体。

**权利要求2**：一种LLM增强的四维语音交互系统，其特征在于，包括：

语音识别模块：用于将语音转换为文本；

四维意图识别模块：用于识别用户意图所属维度；

LLM混合识别模块：用于LLM优先的四层混合意图识别；

上下文管理模块：用于管理维度、对话和实体上下文。

### 从属权利要求

**权利要求3**：根据权利要求1所述的方法，其特征在于，所述记账维度包括：

- 支出记录：识别"花了"、"买了"等关键词；
- 收入记录：识别"收入"、"到账"等关键词；
- 支持金额、分类、时间、备注的提取。

**权利要求4**：根据权利要求1所述的方法，其特征在于，所述查询维度包括：

- 账单查询：识别"多少"、"统计"等关键词；
- 分析查询：识别"占比"、"排行"等关键词；
- 返回结构化数据或自然语言回答。

**权利要求5**：根据权利要求1所述的方法，其特征在于，所述配置维度包括：

- 预算设置：识别"设置"、"预算"等关键词；
- 分类管理：识别"修改"、"删除"等关键词；
- 执行后返回配置结果确认。

**权利要求6**：根据权利要求1所述的方法，其特征在于，所述导航维度包括：

- 页面导航：识别"打开"、"查看"等关键词；
- 功能切换：识别"进入"、"返回"等关键词；
- 执行后跳转到目标页面。

**权利要求7**：根据权利要求1所述的方法，其特征在于，所述多操作识别包括：

- 识别连接词："和"、"还有"、逗号、顿号；
- 分词拆分为独立操作；
- 每个操作独立解析和执行。

**权利要求8**：根据权利要求1所述的方法，其特征在于，还包括流式响应步骤：

- LLM生成过程中流式输出；
- 用户可见实时生成进度；
- 减少等待感知时间。

**权利要求9**：根据权利要求2所述的系统，其特征在于，还包括：

- 语音合成模块：将响应文本转换为语音播报；
- 打断处理模块：支持用户随时打断当前播报；
- 唤醒词检测模块：支持语音唤醒开始交互。
