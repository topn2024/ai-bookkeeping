# 权利要求书

## 基于FIFO资源池的钱龄计算方法及系统

### 独立权利要求

**权利要求1**：一种基于FIFO资源池的钱龄计算方法，其特征在于，包括以下步骤：

S1. 资源入池步骤：
- 接收收入事件，创建资源单元；
- 为每个资源单元记录属性：入池时间戳、资金来源、原始金额、剩余金额、资源ID；
- 将资源单元按时间顺序加入FIFO资源池；

S2. 资源消费步骤：
- 当发生支出时，按照先进先出原则从资源池中选择资源单元；
- 从最早入池的资源单元开始扣除金额；
- 当一个资源单元的剩余金额不足时，从下一个资源单元继续扣除；

S3. 钱龄计算步骤：
- 遍历资源池中所有资源单元；
- 计算每个单元的存活时间 = 当前时间 - 入池时间；
- 按剩余金额加权计算平均钱龄 = Σ(存活时间 × 剩余金额) / Σ(剩余金额)；

S4. 报告生成步骤：
- 生成钱龄分布报告，展示不同年龄段的资金分布；
- 计算资金周转率和平均停留时间。

**权利要求2**：一种基于FIFO资源池的钱龄计算系统，其特征在于，包括：

资源入池模块：用于接收收入事件并创建资源单元入池；

资源管理模块：用于维护资源池状态和处理查询；

资源消费模块：用于按FIFO原则处理支出事件；

钱龄计算模块：用于计算资金年龄统计和生成报告。

### 从属权利要求

**权利要求3**：根据权利要求1所述的方法，其特征在于，所述资金来源分类包括：

- 工资收入；
- 投资收益；
- 转账收入；
- 其他收入。

**权利要求4**：根据权利要求1所述的方法，其特征在于，所述钱龄分布报告包括：

- 0-7天的新鲜资金占比；
- 7-30天的短期资金占比；
- 30-90天的中期资金占比；
- 90天以上的长期资金占比。

**权利要求5**：根据权利要求1所述的方法，其特征在于，还包括资源追溯步骤：

- 对于任意支出，追溯消费了哪些资源单元；
- 记录支出与资源单元的关联关系；
- 支持按来源类型统计支出分布。

**权利要求6**：根据权利要求2所述的系统，其特征在于，还包括可视化模块，展示资源池状态、钱龄分布图和资金流向图。
