# -*- coding: utf-8 -*-
"""
完整刷新目录
"""

NEW_TOC = '''## 目录


**第一部分：概述与愿景**

- [产品概述](#产品概述)
1. [设计概述](#1-设计概述)
2. [产品定位与愿景](#2-产品定位与愿景)

**第二部分：设计理念与原则**

3. [懒人设计原则](#3-懒人设计原则)
4. [伙伴化设计原则](#4-伙伴化设计原则)
5. [无障碍设计](#5-无障碍设计)

**第三部分：核心业务功能**

6. [核心功能架构](#6-核心功能架构)
7. [钱龄智能分析系统](#7-钱龄智能分析系统)
8. [零基预算与小金库系统](#8-零基预算与小金库系统)
9. [金融习惯培养系统](#9-金融习惯培养系统)
10. [AI智能识别系统](#10-ai智能识别系统)
11. [数据导入导出系统](#11-数据导入导出系统)
12. [数据联动与可视化](#12-数据联动与可视化)
13. [家庭账本与多成员管理系统](#13-家庭账本与多成员管理系统)
14. [地理位置智能化应用](#14-地理位置智能化应用)

**第四部分：技术架构与实现**

15. [技术架构设计](#15-技术架构设计)
16. [智能化技术方案](#16-智能化技术方案)
17. [自学习与协同学习系统](#17-自学习与协同学习系统)
18. [智能语音交互系统](#18-智能语音交互系统)
19. [性能设计与优化](#19-性能设计与优化)

**第五部分：用户体验设计**

20. [用户体验设计](#20-用户体验设计)
21. [国际化与本地化](#21-国际化与本地化)

**第六部分：工程保障**

22. [安全与隐私](#22-安全与隐私)
23. [异常处理与容错设计](#23-异常处理与容错设计)
24. [可扩展性与演进架构](#24-可扩展性与演进架构)
25. [可观测性与监控](#25-可观测性与监控)

**第七部分：实施计划**

26. [版本迁移策略](#26-版本迁移策略)
27. [实施路线图](#27-实施路线图)

> **相关文档**: [AI智能记账 2.0 测试策略](./app_v2_test_strategy.md) - 测试验证相关内容

---
'''

def main():
    filepath = 'd:/code/ai-bookkeeping/docs/design/app_v2_design.md'

    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()

    # 找到目录的开始和结束位置
    toc_start = content.find('## 目录')
    toc_end = content.find('# 第一部分：概述与愿景')

    if toc_start == -1 or toc_end == -1:
        print("未找到目录区域")
        return

    # 替换目录
    new_content = content[:toc_start] + NEW_TOC + '\n' + content[toc_end:]

    with open(filepath, 'w', encoding='utf-8') as f:
        f.write(new_content)

    print("目录已完整刷新！")

if __name__ == '__main__':
    main()
