# -*- coding: utf-8 -*-
"""
增强第21章设计原则回顾
"""

def main():
    filepath = 'd:/code/ai-bookkeeping/docs/design/app_v2_design.md'

    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()

    changes = 0

    # 增��21.0设计原则部分
    old_text = '''### 21.0 设计原则与目标

#### 21.0.1 国际化设计原则'''

    new_text = '''### 21.0 设计原则回顾

在深入国际化与本地化细节之前，让我们回顾本章如何体现2.0版本的核心设计原则：

```
┌────────────────────────────────────────────────────────────────────────────┐
│                      国际化与本地化 - 设计原则矩阵                            │
├────────────────────────────────────────────────────────────────────────────┤
│                                                                            │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │  文化适应    │  │  一致体验    │  │  灵活扩展    │  │  性能优先    │       │
│  │             │  │             │  │             │  │             │       │
│  │ 尊重文化    │  │ 功能一致    │  │ 易于扩展    │  │ 按需加载    │       │
│  │ 本地习惯    │  │ 体验统一    │  │ 最小改动    │  │ 懒加载资源  │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│         │                │                │                │              │
│         ▼                ▼                ▼                ▼              │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │
│  │  货币格式    │  │  日期时间    │  │  分类翻译    │  │  AI本地化   │       │
│  │             │  │             │  │             │  │             │       │
│  │ 地区符号    │  │ 地区格式    │  │ 多语言名称  │  │ 语言输出    │       │
│  │ 千分位      │  │ 时区处理    │  │ 图标适配    │  │ 提示词翻译  │       │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘       │
│                                                                            │
│  国际化核心理念：                                                            │
│  ┌────────────────────────────────────────────────────────────────────┐   │
│  │  "文化尊重，体验一致，灵活扩展，性能优先"                              │   │
│  │                                                                    │   │
│  │   文化尊重 ──→ 尊重不同地区的语言、货币、日期习惯                       │   │
│  │   体验一致 ──→ 所有语言版本功能完整、体验统一                          │   │
│  │   灵活扩展 ──→ 易于添加新语言，最小代码改动                            │   │
│  │   性能优先 ──→ 语言资源按需加载，不影响启动速度                         │   │
│  └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

#### 21.0.1 国际化设计原则'''

    if old_text in content:
        content = content.replace(old_text, new_text)
        print("OK: Enhanced 21.0 section header")
        changes += 1
    else:
        print("SKIP: 21.0 header not found (may already be updated)")

    if changes > 0:
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)

    return changes

if __name__ == '__main__':
    main()
