# -*- coding: utf-8 -*-
"""
æ·»åŠ æˆ˜ç•¥åˆ†ææŠ¥å‘Šçš„äº¤å‰å¼•ç”¨åˆ°è®¾è®¡æ–‡æ¡£
"""

def main():
    filepath = 'd:/code/ai-bookkeeping/docs/design/app_v2_design.md'

    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()

    changes = 0

    # 1. åœ¨2.2èŠ‚ç›®æ ‡ç”¨æˆ·è¡¨æ ¼åæ·»åŠ äº¤å‰å¼•ç”¨
    old_text1 = '''| **è‡ªç”±èŒä¸šè€…** | æ”¶å…¥ä¸å›ºå®šï¼Œéœ€è¦ç°é‡‘æµç®¡ç† | æ”¶å…¥è¿½è¸ªã€ç¨åŠ¡è¾…åŠ© |

### 2.3 æ ¸å¿ƒä»·å€¼ä¸»å¼ '''

    new_text1 = '''| **è‡ªç”±èŒä¸šè€…** | æ”¶å…¥ä¸å›ºå®šï¼Œéœ€è¦ç°é‡‘æµç®¡ç† | æ”¶å…¥è¿½è¸ªã€ç¨åŠ¡è¾…åŠ© |

> ğŸ“ **ç›¸å…³æ–‡æ¡£**ï¼šè¯¦ç»†ç”¨æˆ·ç”»åƒï¼ˆå«5ç±»ç”¨æˆ·ç¾¤ä½“ã€è§„æ¨¡å æ¯”ã€ARPUã€è·å®¢æ¸ é“ï¼‰åŠå¸‚åœºåˆ†æè§[AIæ™ºèƒ½è®°è´¦2.0æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰](../AIæ™ºèƒ½è®°è´¦2.0æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰.md#32-å®¢æˆ·ç»†åˆ†åˆ†æ)

### 2.3 æ ¸å¿ƒä»·å€¼ä¸»å¼ '''

    if old_text1 in content and 'æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰' not in content[:5000]:
        content = content.replace(old_text1, new_text1)
        print("å·²æ·»åŠ ç¬¬2ç« ç”¨æˆ·ç”»åƒäº¤å‰å¼•ç”¨")
        changes += 1
    elif 'æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰' in content[:5000]:
        print("ç¬¬2ç« äº¤å‰å¼•ç”¨å·²å­˜åœ¨")
    else:
        print("æœªæ‰¾åˆ°ç¬¬2ç« æ’å…¥ä½ç½®")

    # 2. åœ¨27ç« æœ«å°¾ï¼ˆç¬¬28ç« ä¹‹å‰ï¼‰æ·»åŠ äº¤å‰å¼•ç”¨
    old_text2 = '''> **æ³¨**ï¼šæµ‹è¯•ç­–ç•¥å·²ç‹¬ç«‹ä¸ºå•ç‹¬æ–‡æ¡£ï¼Œè¯¦è§ [AIæ™ºèƒ½è®°è´¦ 2.0 æµ‹è¯•ç­–ç•¥](./app_v2_test_strategy.md)

---

---

## 28. ç”¨æˆ·å£ç¢‘ä¸NPSæå‡è®¾è®¡'''

    new_text2 = '''> **æ³¨**ï¼šæµ‹è¯•ç­–ç•¥å·²ç‹¬ç«‹ä¸ºå•ç‹¬æ–‡æ¡£ï¼Œè¯¦è§ [AIæ™ºèƒ½è®°è´¦ 2.0 æµ‹è¯•ç­–ç•¥](./app_v2_test_strategy.md)

> ğŸ“ **ç›¸å…³æ–‡æ¡£**ï¼šå®Œæ•´çš„3å¹´æˆ˜ç•¥ç›®æ ‡ï¼ˆè´¢åŠ¡/ç”¨æˆ·/äº§å“/å¸‚åœºï¼‰ã€OKRåˆ†è§£ã€èµ„æºé…ç½®åŠé£é™©ç®¡ç†è§[AIæ™ºèƒ½è®°è´¦2.0æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰](../AIæ™ºèƒ½è®°è´¦2.0æˆ˜ç•¥åˆ†ææŠ¥å‘Šï¼ˆäº”çœ‹ä¸‰å®šï¼‰.md#8-ç¬¬äºŒå®šå®šç›®æ ‡)

---

---

## 28. ç”¨æˆ·å£ç¢‘ä¸NPSæå‡è®¾è®¡'''

    if old_text2 in content:
        content = content.replace(old_text2, new_text2)
        print("å·²æ·»åŠ ç¬¬27ç« æˆ˜ç•¥ç›®æ ‡äº¤å‰å¼•ç”¨")
        changes += 1
    else:
        print("æœªæ‰¾åˆ°ç¬¬27ç« æ’å…¥ä½ç½®")

    if changes > 0:
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)
        print(f"\nå·²å®Œæˆ {changes} å¤„äº¤å‰å¼•ç”¨æ·»åŠ ")
    else:
        print("\næœªåšä»»ä½•ä¿®æ”¹")

if __name__ == '__main__':
    main()
