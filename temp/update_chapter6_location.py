# -*- coding: utf-8 -*-
"""
æ›´æ–°6.2.3ç²¾ç¡®ä½ç½®åŠŸèƒ½ä¾èµ–å…³ç³»
æ·»åŠ ä¸å…¶ä»–æ¨¡å—çš„é›†æˆå…³ç³»å›¾å’Œç« èŠ‚å¼•ç”¨
"""

def main():
    filepath = 'd:/code/ai-bookkeeping/docs/design/app_v2_design.md'

    with open(filepath, 'r', encoding='utf-8') as f:
        content = f.read()

    changes = 0

    # æŸ¥æ‰¾å¹¶æ›¿æ¢6.2.3ç« èŠ‚å¼€å¤´
    old_header = '#### 6.2.3 ç²¾ç¡®ä½ç½®åŠŸèƒ½ä¾èµ–å…³ç³»\n\n```'

    new_header = '''#### 6.2.3 ç²¾ç¡®ä½ç½®åŠŸèƒ½ä¾èµ–å…³ç³»

> ğŸ“ **è¯¦ç»†è®¾è®¡**ï¼šä½ç½®æ™ºèƒ½åŒ–å®Œæ•´æ–¹æ¡ˆè¯¦è§[ç¬¬14ç«  åœ°ï¿½ï¿½ï¿½ä½ç½®æ™ºèƒ½åŒ–åº”ç”¨](#14-åœ°ç†ä½ç½®æ™ºèƒ½åŒ–åº”ç”¨)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ä½ç½®æœåŠ¡ä¸å…¶ä»–æ¨¡å—é›†æˆå…³ç³»                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ AIè¯†åˆ«    â”‚   â”‚ é’±é¾„ç³»ç»Ÿ  â”‚   â”‚ é¢„ç®—ç³»ç»Ÿ  â”‚   â”‚ å®¶åº­è´¦æœ¬  â”‚   â”‚ è¯­éŸ³äº¤äº’  â”‚   â”‚
â”‚   â”‚ (10ç« )   â”‚   â”‚ (7ç« )    â”‚   â”‚ (8ç« )    â”‚   â”‚ (13ç« )   â”‚   â”‚ (18ç« )   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€ï¿½ï¿½â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚               â”‚               â”‚               â”‚               â”‚         â”‚
â”‚         â”‚    ä½ç½®è¾…åŠ©    â”‚   ä½ç½®å¢å¼º    â”‚   ä½ç½®é¢„ç®—    â”‚   æˆå‘˜ä½ç½®    â”‚  ä½ç½®æŸ¥è¯¢ â”‚
â”‚         â”‚    åˆ†ç±»è¯†åˆ«    â”‚   é’±é¾„è®¡ç®—    â”‚   æé†’è§¦å‘    â”‚   å…±äº«å±•ç¤º    â”‚  è¯­éŸ³æ”¯æŒ â”‚
â”‚         â”‚               â”‚               â”‚               â”‚               â”‚         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                         â”‚                                         â”‚
â”‚                                         â–¼                                         â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                         â”‚       ç²¾ç¡®ä½ç½®æœåŠ¡ (14ç« )      â”‚                         â”‚
â”‚                         â”‚    PreciseLocationService     â”‚                         â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä½ç½®æœåŠ¡å†…éƒ¨æ¶æ„ï¼š**

```'''

    if old_header in content:
        content = content.replace(old_header, new_header)
        print("âœ“ æ›´æ–°1: æ·»åŠ ä½ç½®æœåŠ¡ä¸å…¶ä»–æ¨¡å—é›†æˆå…³ç³»å›¾")
        changes += 1

    # åœ¨å›¾æœ«å°¾æ·»åŠ ä½ç½®æœåŠ¡é›†æˆè¯´æ˜
    old_ending = '''           â”‚    â”‚   â€¢ æ™ºèƒ½å»ºè®®(è¶…æ”¯/æœªåˆ©ç”¨æ´å¯Ÿ)                        â”‚   â”‚
           â”‚    â”‚                                                      â”‚   â”‚
           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
           â”‚                                                               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.2.4 åŠŸèƒ½ç‰¹æ€§ä¾èµ–çŸ©é˜µ'''

    new_ending = '''           â”‚    â”‚   â€¢ æ™ºèƒ½å»ºè®®(è¶…æ”¯/æœªåˆ©ç”¨æ´å¯Ÿ)                        â”‚   â”‚
           â”‚    â”‚                                                      â”‚   â”‚
           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
           â”‚                                                               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä½ç½®æ•°æ®å…±äº«æœºåˆ¶ï¼š**

| æ¶ˆè´¹æ¨¡å— | ä½ç½®æ•°æ®ç”¨é€” | é›†æˆæ–¹å¼ |
|---------|-------------|---------|
| **AIæ™ºèƒ½è¯†åˆ«** (10ç« ) | POIå•†æˆ·ä¿¡æ¯è¾…åŠ©åˆ†ç±»è¯†åˆ« | å®æ—¶æŸ¥è¯¢ |
| **é’±é¾„åˆ†æ** (7ç« ) | åœºæ™¯åˆ†ç¦»è®¡ç®—ã€æ—…æ¸¸/å‡ºå·®æƒé‡è°ƒæ•´ | äº‹ä»¶è®¢é˜… |
| **é›¶åŸºé¢„ç®—** (8ç« ) | åœ°ç†å›´æ é¢„ç®—æé†’ã€ä½ç½®é¢„ç®—åˆ†é… | å›´æ è§¦å‘ |
| **å®¶åº­è´¦æœ¬** (13ç« ) | æˆå‘˜ä½ç½®å±•ç¤ºï¼ˆéœ€æˆæƒï¼‰ã€æ¶ˆè´¹åœ°ç‚¹å…±äº« | æˆæƒæŸ¥è¯¢ |
| **è¯­éŸ³äº¤äº’** (18ç« ) | "é™„è¿‘å“ªé‡Œæ¶ˆè´¹æœ€å¤š"ç­‰ä½ç½®æŸ¥è¯¢ | APIè°ƒç”¨ |
| **ä¹ æƒ¯åŸ¹å…»** (9ç« ) | é€šå‹¤æ¶ˆè´¹è¿½è¸ªã€é«˜æ¶ˆè´¹åŒºåŸŸæé†’ | äº‹ä»¶è®¢é˜… |
| **æ•°æ®å¯è§†åŒ–** (12ç« ) | æ¶ˆè´¹çƒ­åŠ›å›¾ã€ä½ç½®åˆ†å¸ƒå›¾ | æ•°æ®èšåˆ |

#### 6.2.4 åŠŸèƒ½ç‰¹æ€§ä¾èµ–çŸ©é˜µ'''

    if old_ending in content:
        content = content.replace(old_ending, new_ending)
        print("âœ“ æ›´æ–°2: æ·»åŠ ä½ç½®æ•°æ®å…±äº«æœºåˆ¶è¡¨æ ¼")
        changes += 1

    if changes > 0:
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)
        print(f"\n===== 6.2.3ç²¾ç¡®ä½ç½®åŠŸèƒ½ä¾èµ–å…³ç³»æ›´æ–°å®Œæˆï¼Œå…± {changes} å¤„ =====")
    else:
        print("\næœªæ‰¾åˆ°ç›®æ ‡ä½ç½®æˆ–å·²æ›´æ–°")

    return changes

if __name__ == '__main__':
    main()
