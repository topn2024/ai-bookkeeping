# Android å¼€å‘ç¯å¢ƒé…ç½® - æ–‡æ¡£ç´¢å¼•

æœ¬ç›®å½•åŒ…å« AI æ™ºèƒ½è®°è´¦ Android åº”ç”¨å¼€å‘æ‰€éœ€çš„æ‰€æœ‰ç¯å¢ƒé…ç½®æ–‡æ¡£å’Œå·¥å…·è„šæœ¬ã€‚

---

## ğŸ“š æ–‡æ¡£åˆ—è¡¨

### 1. å¿«é€Ÿå¼€å§‹ï¼ˆæ¨èæ–°æ‰‹ï¼‰
**æ–‡ä»¶**: `Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md`

é€‚åˆç¬¬ä¸€æ¬¡é…ç½® Android å¼€å‘ç¯å¢ƒçš„å¼€å‘è€…ï¼ŒåŒ…å«ï¼š
- âœ… 5 æ­¥å¿«é€Ÿé…ç½®æŒ‡å—
- âœ… å›¾æ–‡è¯¦ç»†è¯´æ˜
- âœ… å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

**å¼€å§‹é˜…è¯»**: [Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md](./Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md)

---

### 2. å®Œæ•´é…ç½®æŒ‡å—ï¼ˆè¯¦ç»†ç‰ˆï¼‰
**æ–‡ä»¶**: `Androidå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md`

è¯¦ç»†çš„ç¯å¢ƒé…ç½®æ–‡æ¡£ï¼ŒåŒ…å«ï¼š
- ğŸ“– å®Œæ•´çš„å®‰è£…æ­¥éª¤
- ğŸ“– å¤šç§å®‰è£…æ–¹å¼å¯¹æ¯”
- ğŸ“– ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£
- ğŸ“– æ•…éšœæ’é™¤æŒ‡å—
- ğŸ“– æ¨èå¼€å‘å·¥å…·

**å¼€å§‹é˜…è¯»**: [Androidå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md](./Androidå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md)

---

## ğŸ› ï¸ å·¥å…·è„šæœ¬

### 1. ç¯å¢ƒæ£€æŸ¥è„šæœ¬
**æ–‡ä»¶**: `scripts/check_environment.sh`

**åŠŸèƒ½**:
- âœ… è‡ªåŠ¨æ£€æŸ¥æ‰€æœ‰å¿…éœ€çš„å¼€å‘å·¥å…·
- âœ… éªŒè¯ç¯å¢ƒå˜é‡é…ç½®
- âœ… æ£€æŸ¥é¡¹ç›®é…ç½®æ–‡ä»¶
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„æ£€æŸ¥æŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•**:
```bash
# è¿è¡Œç¯å¢ƒæ£€æŸ¥
./scripts/check_environment.sh
```

**é¢„æœŸè¾“å‡º**:
```
======================================
  Android å¼€å‘ç¯å¢ƒæ£€æŸ¥å·¥å…·
======================================

1ï¸âƒ£  æ£€æŸ¥ Java ç¯å¢ƒ
-------------------
âœ“ Java JDK å·²å®‰è£…
  java version "17.0.x"
âœ“ Java ç¼–è¯‘å™¨ å·²å®‰è£…
âœ“ JAVA_HOME ç¯å¢ƒå˜é‡
  JAVA_HOME=/Library/Java/JavaVirtualMachines/...

2ï¸âƒ£  æ£€æŸ¥ Android SDK
-------------------
âœ“ ANDROID_HOME ç¯å¢ƒå˜é‡
...

ğŸ‰ æ­å–œï¼æ‰€æœ‰å¿…éœ€çš„ç¯å¢ƒé…ç½®éƒ½å·²å®Œæˆï¼
```

---

### 2. ç­¾åå¯†é’¥ç”Ÿæˆè„šæœ¬
**æ–‡ä»¶**: `scripts/generate_keystore.sh`

**åŠŸèƒ½**:
- ğŸ” ç”Ÿæˆ Android Release ç­¾åå¯†é’¥
- ğŸ” è‡ªåŠ¨åˆ›å»ºå¯†é’¥é…ç½®æ–‡ä»¶
- ğŸ” æä¾›äº¤äº’å¼é…ç½®å‘å¯¼

**ä½¿ç”¨æ–¹æ³•**:
```bash
# è¿è¡Œå¯†é’¥ç”Ÿæˆè„šæœ¬
./scripts/generate_keystore.sh
```

**ç”Ÿæˆæ–‡ä»¶**:
- `app/android/keystore/release.keystore` - ç­¾åå¯†é’¥æ–‡ä»¶
- `app/android/key.properties` - å¯†é’¥é…ç½®æ–‡ä»¶

**æ³¨æ„äº‹é¡¹**:
- âš ï¸ å¯†é’¥å¯†ç è¯·åŠ¡å¿…å¦¥å–„ä¿ç®¡
- âš ï¸ å¯†é’¥æ–‡ä»¶ä¸ä¼šæäº¤åˆ° Gitï¼ˆå·²é…ç½® .gitignoreï¼‰
- âš ï¸ å»ºè®®å¤‡ä»½å¯†é’¥æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®

---

## ğŸš€ å¿«é€Ÿä¸Šæ‰‹æµç¨‹

### ç¬¬ä¸€æ¬¡é…ç½®ç¯å¢ƒ

1. **å®‰è£…å¿…éœ€å·¥å…·**
   ```bash
   # æŒ‰ç…§ "Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md" å®‰è£… Javaã€Android SDKã€Flutter
   ```

2. **æ£€æŸ¥ç¯å¢ƒé…ç½®**
   ```bash
   ./scripts/check_environment.sh
   ```

3. **ç”Ÿæˆç­¾åå¯†é’¥**ï¼ˆå¯é€‰ï¼Œç”¨äº Release æ„å»ºï¼‰
   ```bash
   ./scripts/generate_keystore.sh
   ```

4. **éªŒè¯é…ç½®**
   ```bash
   cd app
   flutter pub get
   flutter build apk --debug
   ```

5. **è¿è¡Œåº”ç”¨**
   ```bash
   flutter run
   ```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
ai-bookkeeping/
â”œâ”€â”€ Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md          # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ Androidå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md       # è¯¦ç»†é…ç½®æŒ‡å—
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ check_environment.sh        # ç¯å¢ƒæ£€æŸ¥è„šæœ¬
â”‚   â””â”€â”€ generate_keystore.sh        # å¯†é’¥ç”Ÿæˆè„šæœ¬
â””â”€â”€ app/
    â”œâ”€â”€ android/
    â”‚   â”œâ”€â”€ app/
    â”‚   â”‚   â”œâ”€â”€ build.gradle        # å·²é…ç½®ç­¾åæ”¯æŒ
    â”‚   â”‚   â””â”€â”€ proguard-rules.pro  # ProGuard æ··æ·†è§„åˆ™
    â”‚   â”œâ”€â”€ keystore/
    â”‚   â”‚   â”œâ”€â”€ .gitignore          # å¿½ç•¥å¯†é’¥æ–‡ä»¶
    â”‚   â”‚   â”œâ”€â”€ README.md           # å¯†é’¥è¯´æ˜
    â”‚   â”‚   â””â”€â”€ release.keystore    # ç­¾åå¯†é’¥ï¼ˆéœ€ç”Ÿæˆï¼‰
    â”‚   â”œâ”€â”€ key.properties.example  # å¯†é’¥é…ç½®ç¤ºä¾‹
    â”‚   â”œâ”€â”€ key.properties          # å¯†é’¥é…ç½®ï¼ˆéœ€ç”Ÿæˆï¼‰
    â”‚   â””â”€â”€ local.properties        # æœ¬åœ° SDK è·¯å¾„
    â””â”€â”€ ...
```

---

## âœ… ç¯å¢ƒé…ç½®æ£€æŸ¥æ¸…å•

å®Œæˆé…ç½®åï¼Œè¯·ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ï¼š

### å¿…éœ€é¡¹
- [ ] Java JDK 17 å·²å®‰è£…
- [ ] JAVA_HOME ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] Android SDK å·²å®‰è£…
- [ ] ANDROID_HOME ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] Flutter SDK å·²å®‰è£…
- [ ] Flutter ç¯å¢ƒå˜é‡å·²è®¾ç½®
- [ ] è¿è¡Œ `flutter doctor` æ— é”™è¯¯
- [ ] Android è®¸å¯åè®®å·²æ¥å—
- [ ] å¯ä»¥æ„å»º Debug APK

### å¯é€‰é¡¹ï¼ˆç”¨äº Release å‘å¸ƒï¼‰
- [ ] ç­¾åå¯†é’¥å·²ç”Ÿæˆ
- [ ] key.properties å·²é…ç½®
- [ ] å¯ä»¥æ„å»º Release APK

---

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### å¼€å‘è°ƒè¯•
```bash
# æŸ¥çœ‹å¯ç”¨è®¾å¤‡
flutter devices

# è¿è¡Œåº”ç”¨ï¼ˆDebugï¼‰
flutter run

# è¿è¡Œåº”ç”¨ï¼ˆReleaseï¼‰
flutter run --release

# çƒ­é‡è½½
r  # åœ¨è¿è¡Œæ—¶æŒ‰ r é”®

# çƒ­é‡å¯
R  # åœ¨è¿è¡Œæ—¶æŒ‰ R é”®
```

### æ„å»ºå‘å¸ƒ
```bash
# æ„å»º Debug APK
flutter build apk --debug

# æ„å»º Release APK
flutter build apk --release

# æ„å»º App Bundleï¼ˆGoogle Playï¼‰
flutter build appbundle --release
```

### æ¸…ç†å’Œæ›´æ–°
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
flutter clean

# æ›´æ–°ä¾èµ–
flutter pub get

# å‡çº§ä¾èµ–
flutter pub upgrade

# åˆ†æä»£ç 
flutter analyze
```

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜ï¼šç¯å¢ƒæ£€æŸ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. è¿è¡Œç¯å¢ƒæ£€æŸ¥è„šæœ¬æŸ¥çœ‹å…·ä½“é—®é¢˜
   ```bash
   ./scripts/check_environment.sh
   ```
2. æ ¹æ®æ£€æŸ¥ç»“æœï¼Œå‚è€ƒç›¸åº”çš„æ–‡æ¡£è¿›è¡Œé…ç½®

---

### é—®é¢˜ï¼šæ„å»ºå¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…ç†ç¼“å­˜
cd app
flutter clean
rm -rf build

# é‡æ–°è·å–ä¾èµ–
flutter pub get

# é‡æ–°æ„å»º
flutter build apk --debug
```

---

### é—®é¢˜ï¼šç­¾åé…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ `app/android/key.properties` å­˜åœ¨
2. ç¡®è®¤å¯†é’¥æ–‡ä»¶è·¯å¾„æ­£ç¡®
3. ç¡®è®¤å¯†ç æ­£ç¡®
4. å‚è€ƒ `app/android/key.properties.example` ç¤ºä¾‹

---

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ–‡æ¡£**
   - å…ˆé˜…è¯» `Androidå¼€å‘å¿«é€Ÿå¼€å§‹.md`
   - æŸ¥çœ‹ `Androidå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—.md` ä¸­çš„æ•…éšœæ’é™¤éƒ¨åˆ†

2. **è¿è¡Œæ£€æŸ¥è„šæœ¬**
   ```bash
   ./scripts/check_environment.sh
   ```

3. **æŸ¥çœ‹ Flutter è¯Šæ–­**
   ```bash
   flutter doctor -v
   ```

4. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**
   ```bash
   flutter build apk --debug -v
   ```

---

## ğŸ“ é…ç½®çŠ¶æ€è®°å½•

### å½“å‰ç¯å¢ƒçŠ¶æ€

| é¡¹ç›® | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| Java JDK | â³ å¾…å®‰è£… | éœ€è¦ Java 17 |
| Android SDK | â³ å¾…å®‰è£… | éœ€è¦ API 35/36 |
| Flutter SDK | âœ… å·²é…ç½® | è·¯å¾„: /Users/beihua/tools/flutter |
| ç­¾åå¯†é’¥ | â³ å¾…ç”Ÿæˆ | è¿è¡Œ generate_keystore.sh |
| Gradle é…ç½® | âœ… å·²å®Œæˆ | æ”¯æŒç­¾åå’Œæ··æ·† |
| é¡¹ç›®ç»“æ„ | âœ… å·²å®Œæˆ | Android ç›®å½•å·²åˆ›å»º |

---

## ğŸ”„ ç‰ˆæœ¬ä¿¡æ¯

- **é¡¹ç›®ç‰ˆæœ¬**: 1.2.22+39
- **Flutter SDK**: éœ€è¦ Flutter 3.10.0+
- **Dart SDK**: ^3.10.0
- **Android SDK**:
  - compileSdk: 36
  - targetSdk: 35
  - minSdk: ä»¥ Flutter é»˜è®¤ä¸ºå‡†

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä¸ºç§æœ‰é¡¹ç›®ï¼Œè¯·å‹¿å…¬å¼€å‘å¸ƒã€‚

---

**é…ç½®å®Œæˆåï¼Œè¿è¡Œç¯å¢ƒæ£€æŸ¥è„šæœ¬éªŒè¯æ‰€æœ‰é…ç½®ï¼š**
```bash
./scripts/check_environment.sh
```

**ç¥ä½ å¼€å‘æ„‰å¿«ï¼ğŸš€**
