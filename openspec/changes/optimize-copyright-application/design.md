# 设计文档

## 上下文

软件著作权申请是保护软件知识产权的重要手段。当前项目已有初步的申请材料，但需要系统化地优化以提高申请成功率。

### 背景
- 项目已开发完成，具备完整的前后端系统
- 已准备初步的申请材料，但存在多处需要改进的地方
- 需要确保材料符合国家版权局的申请规范

### 约束
- 必须符合《计算机软件著作权登记办法》的要求
- 源代码文档必须是前后各30页，每页50行
- 所有材料必须真实、准确、完整
- 不能包含第三方开源代码或侵权内容

### 利益相关者
- 项目开发团队
- 软件著作权申请人
- 国家版权局审核人员

## 目标 / 非目标

### 目标
- 优化现有申请材料，提高申请成功率
- 确保所有材料符合申请规范
- 创建系统化的审核流程和检查清单
- 提供可复用的申请材料模板和指南

### 非目标
- 不涉及代码功能的修改
- 不涉及软件架构的调整
- 不处理实际的申请提交流程（仅准备材料）

## 决策

### 决策1：软件名称优化
**当前问题**：\"智能AI记账管理系统\"存在冗余（AI本身就是智能的）

**优化方案**：
- 方案A：\"AI记账管理系统\" - 简洁明了
- 方案B：\"智能记账管理系统\" - 突出智能特性
- **选择方案A**：更符合行业命名习惯，AI是核心特色

### 决策2：源代码选择策略
**挑战**：如何在60页（3000行）代码中充分展示软件特点

**策略**：
1. **前30页**：选择核心入口和关键功能模块
   - 应用入口（main.dart）
   - AI识别服务（图片识别、语音识别）
   - 核心业务逻辑（记账、预算管理）

2. **后30页**：选择创新算法和数据处理
   - 零基预算算法实现
   - 钱龄计算引擎
   - 数据同步机制
   - API接口实现

**理由**：
- 展示软件的完整性（前端+后端）
- 突出技术创新点（AI应用、创新算法）
- 体现代码质量和规范性

### 决策3：代码统计方法
**方案**：使用自动化工具统计，确保准确性

**工具选择**：
- 使用 `cloc` 工具统计代码行数
- 排除第三方库和自动生成代码
- 分别统计Flutter、Python、Vue代码

**命令示例**：
```bash
cloc app/lib --exclude-dir=generated
cloc server/app
cloc admin-web/src
```

### 决策4：界面截图规范
**要求**：
- 分辨率：1080x1920（移动端）或1920x1080（Web端）
- 格式：PNG（无损压缩）
- 内容：展示核心功能界面，包含真实数据
- 数量：6-8张关键界面

**截图清单**：
1. 首页 - 展示整体布局和快捷入口
2. 图片识别记账 - 展示AI识别功能
3. 语音记账 - 展示语音输入界面
4. 小金库管理 - 展示零基预算功能
5. 数据分析 - 展示图表和统计
6. 家庭账本 - 展示协作功能

### 决策5：材料审核流程
**流程设计**：
1. **自查阶段**：使用检查清单逐项核对
2. **交叉审核**：多人审核关键内容
3. **格式验证**：确保所有格式符合规范
4. **数据验证**：确保统计数据准确
5. **最终确认**：提交前的最后检查

## 风险 / 权衡

### 风险1：代码选择不当
**风险**：选择的代码不能充分展示软件特点
**缓解措施**：
- 制定详细的代码选择指南
- 优先选择核心功能和创新算法
- 确保代码的连续性和可读性

### 风险2：数据不准确
**风险**：代码统计数据与实际不符
**缓解措施**：
- 使用自动化工具统计
- 多次验证统计结果
- 排除第三方代码和自动生成代码

### 风险3：材料不完整
**风险**：遗漏必要的申请材料
**缓解措施**：
- 创建详细的检查清单
- 参考官方申请指南
- 进行多轮审核

### 风险4：格式不规范
**风险**：源代码文档格式不符合要求
**缓解措施**：
- 严格按照每页50行的格式
- 添加清晰的页码和文件路径标注
- 确保代码格式统一

## 权衡

### 权衡1：代码完整性 vs 展示性
- **完整性**：选择连续的代码块，保证逻辑完整
- **展示性**：选择最能体现技术特点的代码
- **平衡**：在保证核心功能完整的前提下，优先选择创新点

### 权衡2：详细程度 vs 简洁性
- **详细**：功能说明越详细越好
- **简洁**：避免冗余和重复
- **平衡**：保持功能描述的准确性和可读性

## 迁移计划

### 步骤1：材料备份
- 备份现有申请材料
- 创建版本控制

### 步骤2：逐项优化
- 按照tasks.md的顺序逐项完成
- 每完成一项进行验证

### 步骤3：整体审核
- 使用检查清单进行全面审核
- 修复发现的问题

### 步骤4：最终确认
- 准备提交材料包
- 进行最后的格式和内容检查

### 回滚方案
- 保留原始材料备份
- 如有问题可随时恢复

## 待决问题

1. 是否需要包含管理后台（admin-web）的代码？
   - 建议：包含，因为这是完整系统的一部分

2. 源代码是否需要包含注释？
   - 建议：保留必要的注释，有助于理解代码功能

3. 是否需要提供英文版本的材料？
   - 建议：不需要，国内申请使用中文即可

4. 申请人信息如何填写？
   - 待确认：个人申请还是企业申请
