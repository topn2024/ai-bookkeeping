# 语音助手能力 - 规范增量

## 新增需求

### 需求：语音配置项全覆盖

系统必须支持通过语音完成200项以上的配置操作，覆盖预算、账户、账本、分类、目标、提醒、外观、AI、同步、安全等13大类配置。

#### 场景：设置预算高级配置
- **当** 用户说"开启零基预算"
- **那么** 系统开启零基预算功能并确认
- **并且** 语音反馈"已开启零基预算，每月初需要重新分配预算"

#### 场景：设置信用卡详细配置
- **当** 用户说"信用卡额度改成5万"
- **那么** 系统更新指定信用卡的额度
- **并且** 语音反馈"已将信用卡额度更新为50000元"

#### 场景：设置家庭成员权限
- **当** 用户说"老婆可以编辑记录"
- **那么** 系统更新该成员的权限为可编辑
- **并且** 语音反馈"已将成员权限更新为可编辑"

#### 场景：设置AI智能参数
- **当** 用户说"分类置信度阈值调到80%"
- **那么** 系统更新AI分类置信度阈值
- **并且** 语音反馈"已将分类置信度阈值设为80%"

### 需求：语音直接操作全覆盖

系统必须支持通过语音直接执行80项以上的非危险操作，无需进入页面，覆盖钱龄、习惯、小金库、数据、分享、系统等操作类别。

#### 场景：执行钱龄操作
- **当** 用户说"查看钱龄"
- **那么** 系统查询并播报当前钱龄数据
- **并且** 语音反馈"您的平均钱龄为45天，处于健康水平"

#### 场景：执行习惯打卡操作
- **当** 用户说"打卡"
- **那么** 系统记录今日打卡
- **并且** 语音反馈"打卡成功！已连续记账15天"

#### 场景：执行小金库分配操作
- **当** 用户说"分配1000到旅游"
- **那么** 系统从可用资金分配1000到旅游小金库
- **并且** 语音反馈"已向旅游小金库分配1000元"

#### 场景：执行数据备份操作
- **当** 用户说"立即备份"
- **那么** 系统执行数据备份
- **并且** 语音反馈"数据备份完成"

### 需求：自学习系统激活

系统必须实现自学习能力，基于用户反馈持续优化意图识别准确率，目标将规则匹配率从60%提升到80%以上，LLM兜底比例从40%降低到15%以下。

#### 场景：采集用户确认信号
- **当** 用户确认一个识别结果
- **那么** 系统将该样本标记为正样本存储
- **并且** 更新对应规则的置信度

#### 场景：采集用户修改信号
- **当** 用户修改一个识别结果
- **那么** 系统将原始输入和修改后结果作为训练样本存储
- **并且** 标记为需要优化的模式

#### 场景：执行定时学习任务
- **当** 达到学习触发条件（样本数>100 且 凌晨2:00）
- **那么** 系统执行模式挖掘和规则生成
- **并且** 更新SmartIntentRecognizer的规则库

#### 场景：查看学习效果
- **当** 用户打开语音设置中的"学习报告"
- **那么** 系统展示规则命中率、准确率变化曲线
- **并且** 显示已生成的个性化规则数量

### 需求：知识库自动问答

系统必须实现FAQ知识库，能够自动回答常见问题，减少用户查找帮助文档的时间。

#### 场景：回答功能使用问题
- **当** 用户说"怎么设置预算"
- **那么** 系统在知识库中匹配相关FAQ
- **并且** 语音播报操作指引"您可以说'设置餐饮预算2000'，或者打开预算管理页面手动设置"

#### 场景：回答功能咨询问题
- **当** 用户说"这个功能有什么用"
- **那么** 系统识别用户当前上下文
- **并且** 播报相关功能说明

#### 场景：处理未匹配问题
- **当** 用户问题在知识库中无法匹配
- **那么** 系统使用LLM兜底生成回答
- **并且** 将问题记录用于后续知识库扩展

### 需求：情绪化响应增强

系统必须根据用户情绪调整响应话术和TTS参数，提供更自然的交互体验。

#### 场景：积极情绪响应
- **当** 检测到用户情绪积极（如成功记账后）
- **那么** 系统使用轻快的语调
- **并且** 话术包含积极词汇"太棒了"、"记录好了"

#### 场景：消极情绪响应
- **当** 检测到用户情绪消极（如表达不满）
- **那么** 系统使用关切的语调
- **并且** 话术包含理解词汇"理解您的心情"、"让我来帮您"

#### 场景：困惑情绪响应
- **当** 检测到用户情绪困惑（如多次重试）
- **那么** 系统提供更详细的引导
- **并且** 话术包含帮助词汇"我来一步步引导您"

## 修改需求

### 需求：意图识别准确率

系统必须在SmartIntentRecognizer的5层识别架构基础上，通过扩展规则库和同义词库，将意图识别准确率提升到95%以上。

#### 场景：识别多样化表达
- **当** 用户使用非标准表达（如"花了15块钱"、"掏了15"、"15块"）
- **那么** 系统均能正确识别为记账意图
- **并且** 提取金额15元

#### 场景：识别地域表达差异
- **当** 用户使用地域性表达（如"刀"代替"元"）
- **那么** 系统能正确解析金额
- **并且** 无需用户重复

#### 场景：识别复合句式
- **当** 用户使用复合句式（如"先记一笔早餐，再设置餐饮预算"）
- **那么** 系统识别出两个独立意图
- **并且** 依次执行
