# 参数化语音导航 - 手机测试指南

## 部署信息
- **部署日期**: 2026-01-23
- **设备**: NOH AN00 (Android 12)
- **版本**: Debug Build
- **APK路径**: `build/app/outputs/flutter-apk/app-debug.apk`

## 测试前准备

### 1. 启用语音助手
1. 打开应用
2. 进入语音助手页面
3. 确保启用了"对话式智能体模式"

### 2. 检查网络连接
- 确保手机已连接网络（参数化导航需要LLM识别）

## 测试场景

### 场景1: 无参数导航（回归测试）
**目的**: 确保现有功能不受影响

| 测试 | 语音输入 | 期望结果 | 实际结果 | 通过 |
|------|---------|---------|---------|------|
| 1.1 | "打开交易列表" | 打开交易列表页，无筛选 | | ☐ |
| 1.2 | "打开统计页面" | 打开统计页面，无筛选 | | ☐ |
| 1.3 | "打开设置" | 打开设置页面 | | ☐ |

### 场景2: 带分类参数的导航 ⭐
**目的**: 验证分类筛选功能

| 测试 | 语音输入 | 期望结果 | 实际结果 | 通过 |
|------|---------|---------|---------|------|
| 2.1 | "查看餐饮类的账单" | 打开交易列表页，自动筛选餐饮分类 | | ☐ |
| 2.2 | "看看交通消费" | 打开页面，筛选交通分类 | | ☐ |
| 2.3 | "打开购物记录" | 打开页面，筛选购物分类 | | ☐ |
| 2.4 | "查看娱乐支出" | 打开页面，筛选娱乐分类 | | ☐ |

### 场景3: 带时间范围的导航 ⭐
**目的**: 验证时间筛选功能

| 测试 | 语音输入 | 期望结果 | 实际结果 | 通过 |
|------|---------|---------|---------|------|
| 3.1 | "查看今天的账单" | 打开页面，筛选今天 | | ☐ |
| 3.2 | "看看昨天的支出" | 打开页面，筛选昨天 | | ☐ |
| 3.3 | "查看本周的记录" | 打开页面，筛选本周 | | ☐ |
| 3.4 | "打开本月的账单" | 打开页面，筛选本月 | | ☐ |
| 3.5 | "看看上周的消费" | 打开页面，筛选上周 | | ☐ |

### 场景4: 带来源参数的导航 ⭐
**目的**: 验证来源筛选功能

| 测试 | 语音输入 | 期望结果 | 实际结果 | 通过 |
|------|---------|---------|---------|------|
| 4.1 | "查看支付宝的支出" | 打开页面，筛选支付宝来源 | | ☐ |
| 4.2 | "看看微信的消费" | 打开页面，筛选微信来源 | | ☐ |

### 场景5: 多参数组合导航 ⭐⭐
**目的**: 验证多参数同时使用

| 测试 | 语音输入 | 期望结果 | 实际结果 | 通过 |
|------|---------|---------|---------|------|
| 5.1 | "查看本周的餐饮消费" | 打开页面，筛选餐饮+本周 | | ☐ |
| 5.2 | "看看本月的购物记录" | 打开页面，筛选购物+本月 | | ☐ |
| 5.3 | "查看今天支付宝的支出" | 打开页面，筛选今天+支付宝 | | ☐ |

## 测试步骤

### 对于每个测试用例：

1. **准备**
   - 确保在语音助手页面
   - 点击麦克风按钮开始录音

2. **执行**
   - 清晰地说出测试用例中的语音输入
   - 等待语音识别和处理

3. **验证**
   - 检查是否打开了正确的页面
   - 检查页面上的筛选条件是否正确应用
   - 检查筛选结果是否符合预期

4. **记录**
   - 在"实际结果"列记录观察到的行为
   - 在"通过"列标记 ☑ (通过) 或 ☐ (失败)
   - 如果失败，记录详细的错误信息

## 验证要点

### 分类筛选验证
- [ ] 页面顶部或筛选区域显示选中的分类
- [ ] 列表中只显示该分类的交易
- [ ] 分类筛选器处于激活状态

### 时间范围验证
- [ ] 页面显示正确的时间范围
- [ ] 列表中只显示该时间范围内的交易
- [ ] 日期筛选器显示正确的日期

### 来源筛选验证
- [ ] 页面显示来源筛选条件
- [ ] 列表中只显示该来源的交易
- [ ] 来源筛选器处于激活状态

### 多参数验证
- [ ] 所有筛选条件都正确应用
- [ ] 列表中的交易同时满足所有条件
- [ ] 筛选器界面显示所有激活的条件

## 调试技巧

### 查看日志
如果测试失败，可以通过以下方式查看日志：

```bash
# 查看应用日志
adb -s PQYGK21318000143 logcat | grep -E "VoiceCoordinator|IntelligenceEngine|VoiceNavigationExecutor|BookkeepingOperationAdapter"
```

### 关键日志标记
- `[SmartIntentRecognizer]` - LLM参数提取
- `[BookkeepingOperationAdapter]` - 参数传递
- `[VoiceCoordinator]` - 导航执行
- `[VoiceNavigationExecutor]` - 页面构造

## 常见问题

### 问题1: 语音识别不准确
**解决方案**:
- 在安静的环境中测试
- 说话清晰，语速适中
- 重试几次

### 问题2: 参数未被识别
**可能原因**:
- LLM未能正确提取参数
- 网络连接问题
- 参数格式不符合预期

**调试步骤**:
1. 查看日志中的LLM响应
2. 检查参数是否被提取
3. 验证参数格式是否正确

### 问题3: 页面打开但筛选未应用
**可能原因**:
- 参数传递链断裂
- 页面未正确处理参数
- 参数值不匹配

**调试步骤**:
1. 查看导航执行日志
2. 检查navigationParams是否传递
3. 验证页面initState是否被调用

## 性能测试

### 响应时间测量
对于每个测试场景，记录以下时间：

| 场景 | 语音识别 | LLM处理 | 页面加载 | 总时间 | 备注 |
|------|---------|---------|---------|--------|------|
| 无参数导航 | | | | | |
| 带分类参数 | | | | | |
| 带时间参数 | | | | | |
| 带来源参数 | | | | | |
| 多参数组合 | | | | | |

**验收标准**: 参数化导航的总响应时间差异 < 500ms

## 测试结果总结

### 通过率
- 场景1（回归测试）: ___/3 (___%)
- 场景2（分类参数）: ___/4 (___%)
- 场景3（时间参数）: ___/5 (___%)
- 场景4（来源参数）: ___/2 (___%)
- 场景5（多参数）: ___/3 (___%)
- **总计**: ___/17 (___%)

### 发现的问题
1.
2.
3.

### 改进建议
1.
2.
3.

### 测试结论
- [ ] 所有核心功能正常工作
- [ ] 性能符合预期
- [ ] 可以发布到生产环境
- [ ] 需要修复问题后重新测试

## 测试人员签名
- **测试人员**: ___________
- **测试日期**: ___________
- **测试时长**: ___________
