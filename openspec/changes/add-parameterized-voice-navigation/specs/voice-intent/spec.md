# 语音意图识别

## 新增需求

### 需求：参数化导航意图识别

系统必须支持从用户语音中提取导航参数，包括分类、时间范围、来源和账户筛选条件，并将参数传递给目标页面。

#### 场景：带分类参数的导航

- **当** 用户说"查看餐饮类的账单"
- **那么** 系统识别导航意图，提取参数 category="餐饮"
- **并且** 系统打开交易列表页，自动应用餐饮分类筛选
- **并且** 系统语音反馈"正在打开餐饮账单"

#### 场景：带时间范围的导航

- **当** 用户说"看看本周的交通消费"
- **那么** 系统识别导航意图，提取参数 category="交通"，timeRange="本周"
- **并且** 系统打开分类统计页，显示交通分类+本周时间范围的数据
- **并且** 系统语音反馈"正在显示本周交通消费"

#### 场景：带来源参数的导航

- **当** 用户说"查看支付宝的支出"
- **那么** 系统识别导航意图，提取参数 source="支付宝"
- **并且** 系统打开交易列表页，筛选支付宝来源的交易
- **并且** 系统语音反馈"正在显示支付宝支出"

#### 场景：多参数组合导航

- **当** 用户说"查看本月微信的餐饮消费"
- **那么** 系统识别导航意图，提取参数 category="餐饮"，timeRange="本月"，source="微信"
- **并且** 系统打开交易列表页，应用所有筛选条件
- **并且** 系统语音反馈"正在显示本月微信餐饮消费"

#### 场景：无效参数静默忽略

- **当** 用户说"查看火星类的账单"（无效分类）
- **那么** 系统识别导航意图，忽略无效的 category 参数
- **并且** 系统打开交易列表页，不应用分类筛选
- **并且** 系统语音反馈"正在打开账单列表"

---

### 需求：导航参数透传

系统必须在整个语音处理链路中保持导航参数的完整性，从意图识别到页面构造。

#### 场景：参数从适配器传递到执行器

- **当** BookkeepingOperationAdapter 返回导航结果时
- **那么** 结果中必须包含 navigationParams 字段
- **并且** navigationParams 包含所有从用户输入提取的有效参数

#### 场景：执行器使用参数构造页面

- **当** VoiceNavigationExecutor 接收到带参数的导航请求时
- **那么** 执行器必须将参数传递给 _getPageForRoute 方法
- **并且** 页面构造函数接收对应的筛选参数

---

### 需求：时间范围解析

系统必须支持将用户描述的时间范围转换为具体的日期区间。

#### 场景：解析"今天"

- **当** 用户说"今天"
- **那么** 系统将其解析为当天 00:00:00 到当前时间

#### 场景：解析"本周"

- **当** 用户说"本周"
- **那么** 系统将其解析为本周一 00:00:00 到当前时间

#### 场景：解析"本月"

- **当** 用户说"本月"
- **那么** 系统将其解析为本月1日 00:00:00 到当前时间

#### 场景：解析"上月"

- **当** 用户说"上月"
- **那么** 系统将其解析为上月1日 00:00:00 到上月最后一天 23:59:59

---

### 需求：分类同义词映射

系统必须支持用户使用同义词描述分类，并映射到标准分类名称。

#### 场景：同义词匹配

- **当** 用户说"饮食"或"吃饭"
- **那么** 系统将其映射为标准分类"餐饮"

#### 场景：来源同义词匹配

- **当** 用户说"淘宝"或"天猫"
- **那么** 系统将其映射为来源"支付宝"（因为淘宝/天猫通常使用支付宝支付）

## 修改需求

### 需求：导航操作执行

系统必须在导航操作执行时支持可选的导航参数传递。

#### 场景：无参数导航（保持兼容）

- **当** 用户说"打开统计页面"（无筛选参数）
- **那么** 系统执行导航，不传递任何筛选参数
- **并且** 页面以默认状态打开

#### 场景：有参数导航

- **当** 用户说"查看餐饮账单"
- **那么** 系统执行导航，传递 category="餐饮" 参数
- **并且** 页面打开时自动应用餐饮分类筛选
