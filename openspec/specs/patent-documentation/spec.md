# patent-documentation Specification

## Purpose
TBD - created by archiving change standardize-patent-documentation. Update Purpose after archive.
## 需求
### 需求：专利目录结构标准化

系统必须使用统一的专利目录结构，确保所有专利文档易于管理和查找。

#### 场景：标准化目录命名

- **当** 创建或迁移专利文档
- **那么** 必须使用 `P{两位数字编号}-{英文简称}` 格式命名目录
- **并且** 英文简称使用小写字母，单词用连字符分隔，最多4个单词
- **并且** 编号必须连续（P01-P18），无跳号
- **示例** `P01-fifo-money-age`, `P02-multimodal-bookkeeping`

#### 场景：标准化目录内容

- **当** 专利目录创建完成
- **那么** 每个专利目录必须包含以下文件：
  - `metadata.json`：专利元数据
  - `specification.md`：说明书（完整版，不分part）
  - `claims.md`：权利要求书
  - `abstract.md`：摘要
  - `figures/`：流程图目录
- **并且** 可选包含 `supplementary/` 目录存放补充材料

### 需求：专利文件命名规范

系统必须使用统一的文件命名规则，确保文档易于识别和管理。

#### 场景：说明书文件命名

- **当** 创建或迁移说明书文档
- **那么** 必须使用 `specification.md` 作为文件名
- **并且** 说明书必须是完整版本，不得分割为多个part文件

#### 场景：权利要求书和摘要命名

- **当** 创建权利要求书或摘要
- **那么** 权利要求书必须命名为 `claims.md`
- **并且** 摘要必须命名为 `abstract.md`

#### 场景：流程图文件命名

- **当** 创建流程图文件
- **那么** 必须使用 `fig-{两位数字}-{英文描述}.{扩展名}` 格式
- **并且** 同时保留 SVG 源文件和 PNG 提交版本
- **示例** `fig-01-system-architecture.svg`, `fig-01-system-architecture.png`

### 需求：专利流程图标准

系统必须按照国家知识产权局要求生成专利流程图，确保符合专利审查规范。

#### 场景：流程图格式要求

- **当** 生成用于专利提交的流程图
- **那么** PNG格式分辨率必须至少300 DPI
- **并且** 必须使用黑白或灰度颜色（不接受彩色）
- **并且** 尺寸必须适配A4纸大小（210mm × 297mm）
- **并且** 文字必须清晰可读，字号不小于3.5mm

#### 场景：流程图内容规范

- **当** 绘制流程图内容
- **那么** 必须使用标准流程图符号（GB/T 1526-1989）
- **并且** 流程方向必须从上到下、从左到右
- **并且** 使用箭头表示连接线方向
- **并且** 判断框使用菱形，标注"是/否"
- **并且** 图片必须使用中文标注

#### 场景：流程图类型

- **当** 为专利创建附图
- **那么** 每个专利必须包含以下类型的流程图：
  - 系统架构图：展示系统整体结构和模块关系
  - 算法流程图：展示算法执行步骤
  - 数据结构图：展示数据结构定义
  - 时序图：展示多个实体间的交互
- **并且** 可选包含对比图和性能指标图

### 需求：专利元数据管理

系统必须为每个专利维护结构化的元数据文件，便于自动化管理和索引生成。

#### 场景：元数据文件格式

- **当** 创建专利元数据
- **那么** 必须使用 JSON 格式的 `metadata.json` 文件
- **并且** 必须包含以下字段：
  - `patent_id`：专利编号（如 "P01"）
  - `title`：专利标题（中英文）
  - `inventors`：发明人列表
  - `applicant`：申请人
  - `status`：当前状态（drafting/filed/granted）
  - `category`：专利分类
  - `estimated_success_rate`：预估成功率
  - `version`：版本号
  - `changelog`：版本变更记录
  - `figures`：附图列表
  - `files`：文件路径映射

#### 场景：全局索引文件

- **当** 专利组合发生变更
- **那么** 必须更新 `docs/patents/index.json` 全局索引
- **并且** 索引必须包含所有专利的基本信息、分类统计和状态统计
- **并且** 必须同步更新 `docs/patents/README.md` 总览文档

### 需求：专利版本管理

系统必须维护清晰的专利文档版本历史，确保变更可追溯。

#### 场景：版本归档

- **当** 专利文档产生新版本
- **那么** 旧版本必须归档到 `docs/patents/archive/v{版本号}/` 目录
- **并且** 当前版本保留在 `docs/patents/patents/` 目录
- **并且** 元数据文件的 `changelog` 字段必须记录版本变更

#### 场景：旧文件清理

- **当** 完成专利文档迁移
- **那么** 必须删除重复的目录和文件
- **并且** 将旧版 .docx 文件归档到 `archive/` 目录
- **并且** 仅保留标准化后的目录结构

### 需求：专利文档验证

系统必须提供自动化工具验证专利文档的完整性和规范性。

#### 场景：文件完整性验证

- **当** 运行专利验证工具
- **那么** 必须检查每个专利是否包含所有必需文件
- **并且** 必须检查文件命名是否符合规范
- **并且** 必须检查元数据文件格式是否正确

#### 场景：流程图质量验证

- **当** 验证流程图文件
- **那么** 必须检查分辨率是否达到300 DPI
- **并且** 必须检查是否为黑白或灰度
- **并且** 必须检查尺寸是否适配A4

#### 场景：生成验证报告

- **当** 验证完成
- **那么** 必须生成验证报告 `docs/patents/validation-report.md`
- **并且** 报告必须列出所有检查项及其通过/失败状态
- **并且** 报告必须提供修复建议

