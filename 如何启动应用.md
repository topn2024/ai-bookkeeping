# å¦‚ä½•å¯åŠ¨ AI è®°è´¦åº”ç”¨

## âœ… å·²å®Œæˆçš„å‡†å¤‡å·¥ä½œ

1. âœ… ADB å·²é…ç½®ä½¿ç”¨ç«¯å£ 5038ï¼ˆé¿å…ä¸ç³»ç»ŸæœåŠ¡å†²çªï¼‰
2. âœ… Android æ¨¡æ‹Ÿå™¨ AVD å·²åˆ›å»ºï¼ˆ`AI_Bookkeeping_Emulator`ï¼‰
3. âœ… æ¨¡æ‹Ÿå™¨æ­£åœ¨è¿è¡Œä¸­
4. âœ… APK å·²æˆåŠŸæ„å»ºï¼š`D:\code\ai-bookkeeping\app\build\app\outputs\flutter-apk\app-debug.apk`

## ğŸš€ å¯åŠ¨åº”ç”¨ï¼ˆ3 æ­¥ï¼‰

### æ–¹å¼ Aï¼šè‡ªåŠ¨å®‰è£…å¹¶å¯åŠ¨ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰**ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```cmd
cd D:\code\ai-bookkeeping\scripts
start-app.bat
```

2. **æŒ‰ç…§è„šæœ¬æç¤ºæ“ä½œ**
   - ç­‰å¾… ADB æœåŠ¡å¯åŠ¨
   - ç¡®è®¤è®¾å¤‡çŠ¶æ€ä¸º `device`ï¼ˆä¸æ˜¯ `offline` æˆ– `authorizing`ï¼‰
   - æŒ‰ä»»æ„é”®ç»§ç»­
   - ç­‰å¾…åº”ç”¨æ„å»ºå’Œå®‰è£…

### æ–¹å¼ Bï¼šæ‰‹åŠ¨å®‰è£… APK

å¦‚æœè‡ªåŠ¨å®‰è£…é‡åˆ°é—®é¢˜ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨å®‰è£…ï¼š

#### æ­¥éª¤ 1ï¼šæ‰“å¼€æ–°çš„å‘½ä»¤æç¤ºç¬¦

```cmd
REM è®¾ç½®ç¯å¢ƒå˜é‡
set ANDROID_ADB_SERVER_PORT=5038
set ANDROID_HOME=D:\Android\Sdk
```

#### æ­¥éª¤ 2ï¼šå¯åŠ¨ ADB å¹¶æ£€æŸ¥è®¾å¤‡

```cmd
REM å¯åŠ¨ ADB
%ANDROID_HOME%\platform-tools\adb.exe start-server

REM æ£€æŸ¥è®¾å¤‡
%ANDROID_HOME%\platform-tools\adb.exe devices -l
```

**é¢„æœŸè¾“å‡ºï¼š**
```
List of devices attached
emulator-5554          device product:sdk_gphone64_x86_64 ...
```

**å¦‚æœè®¾å¤‡æ˜¾ç¤º `offline` æˆ–æ²¡æœ‰è®¾å¤‡ï¼š**

1. å…³é—­å¹¶é‡æ–°æ‰“å¼€æ¨¡æ‹Ÿå™¨çª—å£
2. æˆ–è¿è¡Œï¼š`emulator -avd AI_Bookkeeping_Emulator`
3. ç­‰å¾… 30-60 ç§’è®©æ¨¡æ‹Ÿå™¨å®Œå…¨å¯åŠ¨
4. å†æ¬¡è¿è¡Œ `adb devices` æ£€æŸ¥

#### æ­¥éª¤ 3ï¼šå®‰è£… APK

```cmd
cd D:\code\ai-bookkeeping\app
%ANDROID_HOME%\platform-tools\adb.exe install -r build\app\outputs\flutter-apk\app-debug.apk
```

#### æ­¥éª¤ 4ï¼šå¯åŠ¨åº”ç”¨

**æ–¹æ³• 1ï¼šé€šè¿‡ ADB å¯åŠ¨**
```cmd
%ANDROID_HOME%\platform-tools\adb.exe shell am start -n com.example.ai_bookkeeping/.MainActivity
```

**æ–¹æ³• 2ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰‹åŠ¨ç‚¹å‡»**
- åœ¨æ¨¡æ‹Ÿå™¨å±å¹•ä¸Šæ‰¾åˆ° "AI Bookkeeping" åº”ç”¨å›¾æ ‡
- ç‚¹å‡»å¯åŠ¨

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1ï¼šADB æ— æ³•è¿æ¥è®¾å¤‡

**ç—‡çŠ¶ï¼š** `adb devices` æ˜¾ç¤º `offline` æˆ–æ²¡æœ‰è®¾å¤‡

**è§£å†³æ–¹æ³•ï¼š**

```cmd
REM 1. é‡å¯ ADB
set ANDROID_ADB_SERVER_PORT=5038
adb kill-server
adb start-server

REM 2. ç­‰å¾… 5 ç§’
timeout /t 5

REM 3. æ£€æŸ¥è®¾å¤‡
adb devices
```

å¦‚æœä»ç„¶æ²¡æœ‰è®¾å¤‡ï¼Œ**é‡å¯æ¨¡æ‹Ÿå™¨ï¼š**

1. å…³é—­æ¨¡æ‹Ÿå™¨çª—å£
2. è¿è¡Œï¼š`D:\Android\Sdk\emulator\emulator.exe -avd AI_Bookkeeping_Emulator`
3. ç­‰å¾…æ¨¡æ‹Ÿå™¨æ˜¾ç¤ºæ¡Œé¢ï¼ˆçº¦ 30-60 ç§’ï¼‰
4. å†æ¬¡æ£€æŸ¥ `adb devices`

### é—®é¢˜ 2ï¼šè®¾å¤‡ä¸€ç›´æ˜¾ç¤º authorizing

**è§£å†³æ–¹æ³•ï¼š**

1. åœ¨æ¨¡æ‹Ÿå™¨çª—å£ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰æˆæƒæç¤ºå¼¹çª—
2. ç‚¹å‡»"å…è®¸" USB è°ƒè¯•
3. å¦‚æœæ²¡æœ‰å¼¹çª—ï¼Œé‡å¯ ADBï¼š
   ```cmd
   adb kill-server
   adb start-server
   ```

### é—®é¢˜ 3ï¼šFlutter æ„å»ºå¤±è´¥

**é‡æ–°æ„å»º APKï¼š**

```cmd
cd D:\code\ai-bookkeeping\app
flutter clean
flutter pub get
flutter build apk --debug
```

### é—®é¢˜ 4ï¼šç«¯å£å†²çª

**æ£€æŸ¥ç«¯å£å ç”¨ï¼š**

```cmd
netstat -ano | findstr "5038"
netstat -ano | findstr "5037"
```

- 5037 è¢« LogsAndAlerts å ç”¨æ˜¯æ­£å¸¸çš„
- 5038 åº”è¯¥åªè¢« ADB ä½¿ç”¨

---

## ğŸ“± ä½¿ç”¨å·²æ„å»ºçš„ APK

APK æ–‡ä»¶ä½ç½®ï¼š
```
D:\code\ai-bookkeeping\app\build\app\outputs\flutter-apk\app-debug.apk
```

æ‚¨å¯ä»¥ï¼š
1. é€šè¿‡ ADB å®‰è£…åˆ°ä»»ä½• Android è®¾å¤‡
2. é€šè¿‡æ–‡ä»¶ç®¡ç†å™¨æ‹·è´åˆ°å®ä½“ Android æ‰‹æœºå¹¶å®‰è£…
3. åˆ†å‘ç»™æµ‹è¯•äººå‘˜

**å®‰è£…å‘½ä»¤ï¼š**
```cmd
set ANDROID_ADB_SERVER_PORT=5038
adb install -r app-debug.apk
```

---

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### ä¿®æ”¹ä»£ç åé‡æ–°è¿è¡Œ

```cmd
REM æ–¹å¼ 1ï¼šçƒ­é‡è½½ï¼ˆå¦‚æœåº”ç”¨å·²åœ¨è¿è¡Œï¼‰
REM åœ¨è¿è¡Œä¸­çš„ Flutter çª—å£æŒ‰ 'r' é”®

REM æ–¹å¼ 2ï¼šå®Œå…¨é‡æ–°æ„å»º
cd D:\code\ai-bookkeeping\app
flutter build apk --debug
adb install -r build\app\outputs\flutter-apk\app-debug.apk
```

### æŸ¥çœ‹æ—¥å¿—

```cmd
set ANDROID_ADB_SERVER_PORT=5038
adb logcat | findstr "flutter"
```

---

## ğŸ“š å¿«æ·å‘½ä»¤å‚è€ƒ

```cmd
REM è®¾ç½®ç¯å¢ƒï¼ˆåœ¨æ¯ä¸ªæ–°å‘½ä»¤çª—å£éƒ½éœ€è¦ï¼‰
set ANDROID_ADB_SERVER_PORT=5038

REM æŸ¥çœ‹è®¾å¤‡
adb devices

REM é‡å¯ ADB
adb kill-server && adb start-server

REM å¯åŠ¨æ¨¡æ‹Ÿå™¨
emulator -avd AI_Bookkeeping_Emulator

REM å®‰è£… APK
adb install -r app-debug.apk

REM å¯åŠ¨åº”ç”¨
adb shell am start -n com.example.ai_bookkeeping/.MainActivity

REM å¸è½½åº”ç”¨
adb uninstall com.example.ai_bookkeeping

REM æŸ¥çœ‹åŒ…å
adb shell pm list packages | findstr bookkeeping
```

---

## ğŸ’¡ å»ºè®®

1. **å¼€å‘æ—¶ä½¿ç”¨è‡ªåŠ¨è„šæœ¬ï¼š** `scripts\start-app.bat`
2. **æµ‹è¯•æ—¶æ‰‹åŠ¨å®‰è£… APK** æ›´ç¨³å®š
3. **ä¿æŒæ¨¡æ‹Ÿå™¨çª—å£æ‰“å¼€** é¿å…é¢‘ç¹é‡å¯
4. **ä½¿ç”¨çƒ­é‡è½½** åŠ å¿«å¼€å‘é€Ÿåº¦

---

## âœ¨ ä¸‹ä¸€æ­¥

åº”ç”¨å®‰è£…æˆåŠŸåï¼Œæ‚¨å¯ä»¥ï¼š

1. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½
2. ä¿®æ”¹ä»£ç å¹¶é‡æ–°æ„å»º
3. è¿è¡Œ `flutter analyze` æ£€æŸ¥ä»£ç é—®é¢˜
4. æ„å»ºå‘å¸ƒç‰ˆ APKï¼š`flutter build apk --release`

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸ‰
